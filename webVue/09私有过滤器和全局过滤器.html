<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="vue1028.js"></script>
    <script src="vue-resource.js"></script>
</head>
<body>
    <div id="app">
        {{istime | dataftm}}
        <!--<div id="app1">{{istime | dataftm}}</div>-->
    </div>
</body>
<script>
    //全局过滤器
    Vue.filter("dataftm",function(){
            var url = "http://vuecms.ittun.com/api/getprodlist";
            //get请求
            this.$http.get(url).then(function(response){
                console.log(response.body);
                //判断是否成功
                if(response.body.status != 0){
                    console.log("少年请求失败了,回家耕田吧");
                    return;
                }
                this.istime = response.body.message;
            })
            /*var time = new Date();
            var year = time.getFullYear();
            var month = time.getMonth();
            var day= time.getDate();
            return year+"-"+month+"-"+day;*/
        }
    );
    new Vue({
        el:"#app",
        data:{
            istime:[]
        },//私有过滤器在多个vm不能共享，容易造成代码冗余，加大维护成本
        filters:{
            dataftm:function(){
             var url = "http://vuecms.ittun.com/api/getprodlist";
             //get请求
             this.$http.get(url).then(function(response){
             console.log(response.body);
             //判断是否成功
             if(response.body.status != 0){
             console.log("少年请求失败了,回家耕田吧");
             return;
             }
             this.istime = response.body.message;
             })
                    /*var time = new Date();
                    var year = time.getFullYear();
                    var month = time.getMonth();
                    var day= time.getDate();
                    return year+"-"+month+"-"+day;*/
            }
        }
    });
    //私有过滤器
</script>
</html>