<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
    <title>Title</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/index.css">
</head>
<body>
<!--//整个内容盒子-->
<div class="jd_layout">
    <!--//固定的头部-->
    <header class="jd_header">
        <a href="" class="jd_logo"></a>
        <form action="">
            <span class="icon_search"></span>
            <input type="search" placeholder="请输入商品名称">
        </form>
        <a href="" class="jd_login">登录</a>
    </header>
    <!--//轮播图-->
    <div class="jd_banner">
        <ul class="clearfix">
            <li><a href=""><img src="../images/l8.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l1.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l2.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l3.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l4.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l5.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l6.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l7.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l8.jpg" alt=""></a></li>
            <li><a href=""><img src="../images/l1.jpg" alt=""></a></li>
        </ul>
        <ul>
            <li class="active"></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
    <!--//分类查询-->
    <div class="jd_category">
        <ul class="clearfix">
            <li>
                <a href="">
                    <img src="../images/nav0.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav2.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav3.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav4.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav5.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav6.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav7.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
            <li>
                <a href="">
                    <img src="../images/nav1.png" alt="">
                    <p>分类查询</p>
                </a>
            </li>
        </ul>
    </div>
    <!--//产品-->
    <main class="jd_product">
        <section class="jd_product_box jd_sk">
            <div class="jd_product_title no_border">
               <div class="f_left m_l10">
                   <span class="jd_sk_icon"></span>
                   <span class="jd_sk_name m_l10 f_left">掌上秒杀</span>
                   <div class="f_left jd_sk_time m_l10">
                       <span>0</span>
                       <span>0</span>
                       <span>:</span>
                       <span>0</span>
                       <span>0</span>
                       <span>:</span>
                       <span>0</span>
                       <span>0</span>
                   </div>
               </div>
                <div class="f_right m_r10">
                    <a href="">更多秒杀..</a>
                </div>
            </div>
            <div class="jd_product_content">
                <ul class="clearfix">
                    <li>
                        <a href="">
                            <img src="../images/detail01.jpg" alt="">
                        </a>
                        <p>&yen;10.00</p>
                        <p>&yen;20.00</p>
                    </li>
                    <li>
                        <a href="">
                            <img src="../images/detail02.jpg" alt="">
                        </a>
                        <p>&yen;10.00</p>
                        <p>&yen;20.00</p>
                    </li>
                    <li>
                        <a href="">
                            <img src="../images/detail01.jpg" alt="">
                        </a>
                        <p>&yen;10.00</p>
                        <p>&yen;20.00</p>
                    </li>
                </ul>
            </div>
        </section>
        <section class="jd_product_box">
            <div class="jd_product_title">
                <h3>京东超市</h3>
            </div>
            <div class="jd_product_content clearfix">
                <a href="" class="w_50 b_right f_left"><img src="../images/cp1.jpg" alt=""></a>
                <a href="" class="w_50 b_bottom f_right"><img src="../images/cp2.jpg" alt=""></a>
                <a href="" class="w_50 f_right"><img src="../images/cp3.jpg" alt=""></a>
            </div>
        </section>
        <section class="jd_product_box">
            <div class="jd_product_title">
                <h3>京东超市</h3>
            </div>
            <div class="jd_product_content clearfix">
                <a href="" class="w_50 b_left f_right"><img src="../images/cp4.jpg" alt=""></a>
                <a href="" class="w_50 b_bottom f_left"><img src="../images/cp5.jpg" alt=""></a>
                <a href="" class="w_50 f_left"><img src="../images/cp6.jpg" alt=""></a>
            </div>
        </section>
        <section class="jd_product_box">
            <div class="jd_product_title">
                <h3>京东超市</h3>
            </div>
            <div class="jd_product_content clearfix">
                <a href="" class="w_50 b_right f_left"><img src="../images/cp1.jpg" alt=""></a>
                <a href="" class="w_50 b_bottom f_right"><img src="../images/cp2.jpg" alt=""></a>
                <a href="" class="w_50 f_right"><img src="../images/cp3.jpg" alt=""></a>
            </div>
        </section>
    </main>
</div>
<script src="../js/common.js"></script>
<script src="../js/index.js"></script>
<script>
    window.onload=function(){
        //设置自动轮播
        var ul = document.querySelector(".jd_banner ul");
        var li = document.querySelector(".jd_banner ul li");
        var jd_banner = document.querySelector(".jd_banner");
        var index = 1;
        var startX = 0;
        var processX = 0;
        //
        /*setInterval(function(){
            index++;
            ul.style.transition = "all 0.2s";
            ul.style.webkitTransition = "all 0.2s";
            /!*if(index<ul.children.length){
                ul.style.transform = "translateX("+(-index*li.offsetWidth)+"px)";
                ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth)+"px)";
            }else{
                index = 1;
                ul.style.transform = "translateX("+(-index*li.offsetWidth)+"px)";
                ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth)+"px)";
            }*!/
        },2000);*/

        //触摸开始 记录位置
        ul.addEventListener("touchstart",function(e){
            startX = e.touches[0].clientX;
            //console.log(startX);
        })
        //触摸过程 记录偏移值
        ul.addEventListener("touchmove",function(e){
            var offsetX = 0
            processX = e.touches[0].clientX;
            offsetX = startX-processX;
            //设置图片偏移位
            ul.style.transition = "none";
            ul.style.webkitTransition= "none";
            ul.style.transform = "translateX("+(-index*li.offsetWidth-offsetX)+"px)";
            ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth-offsetX)+"px)";
        })
        //触摸结束
        ul.addEventListener("touchend",function(e){
            if(offsetX == 0){
                console.log(111);
                return;
            }
            if(index > 9){
                index = 1;
                ul.style.transition = "All 0.5s";
                ul.style.webkitTransition= "All 0.5s";
                ul.style.transform = "translateX("+(-index*li.offsetWidth)+"px)";
                ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth)+"px)";
            }else if(index < 2){
                index = 9;
                ul.style.transition = "All 0.5s";
                ul.style.webkitTransition= "All 0.5s";
                ul.style.transform = "translateX("+(-index*li.offsetWidth)+"px)";
                ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth)+"px)";
            }else{
                //计算偏移位
                var offsetX = startX-processX;
                //console.log("偏移量"+offsetX+"-----"+"宽度1/3"+jd_banner.offsetWidth/3+"索引:"+index);
                //滑动的偏移度大于banner的1/3触发位移
                if(Math.abs(offsetX) > jd_banner.offsetWidth/3){
                    if(offsetX > 0){
                        index++;
                    }else{
                        index--;
                    }
                    //设置图片偏移位
                    ul.style.transition = "All 0.5s";
                    ul.style.webkitTransition= "All 0.5s";
                    ul.style.transform = "translateX("+(-index*li.offsetWidth)+"px)";
                    ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth)+"px)";
                }
                else if(Math.abs(processX) > 0){
                    //console.log(index);
                    console.log(20);
                    ul.style.transition = "All 0.5s";
                    ul.style.webkitTransition= "All 0.5s";
                    ul.style.transform = "translateX("+(-index*li.offsetWidth)+"px)";
                    ul.style.wekitTransform = "translateX("+(-index*li.offsetWidth)+"px)";
                }
            }
        })
    }
</script>
</body>
</html>